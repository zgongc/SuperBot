# config/main.yaml
# SuperBot - Ana Yapılandırma Dosyası
# Yazar: SuperBot Team
# Tarih: 2025-11-12
# Versiyon: 1.0.0

# ============================================================
# SİSTEM AYARLARI
# ============================================================
system:
  name: "SuperBot"
  version: "1.0.0"
  environment: "testnet" # testnet veya production
  language: "en" # tr veya en

  # Timezone ayarları
  timezone: "UTC" # Sistem timezone (UTC önerilir)
  utc_offset: 3 # UTC offset (saat cinsinden): 0=UTC, 3=UTC+3, -5=UTC-5
  use_local_time: false # true: Local time kullan, false: UTC kullan (önerilen)

# ============================================================
# LOGLAMA AYARLARI
# ============================================================
logging:
  level: "DEBUG" # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "json" # json veya text

  # Konsol çıktısı
  console:
    enabled: true
    colored: true
    ansi_color: false # Disable ANSI color codes (Flask/Werkzeug)

  # Dosya çıktısı
  file:
    enabled: false
    log_dir: "data/logs"
    filename: "superbot.log"

  # Log rotation
  rotation:
    enabled: true
    max_bytes: 10485760 # 10MB
    backup_count: 5
    compress: true

  # Flask Logging Option
  flask:
    level: "DEBUG" # DEBUG/INFO/WARNING/ERROR
    log_output: true # true = göster, false = gizle

  # Engine bazlı ayrı log dosyaları
  per_engine_logs: false

# ============================================================
# PERFORMANS AYARLARI
# ============================================================
performance:
  # Kaynak limitleri
  max_cpu_percent: 80
  max_memory_mb: 1024

  # Health check
  health_check_interval: 5 # saniye

  # Process management
  max_restart_attempts: 3
  restart_delay: 5 # saniye

  # Thread/Process pool
  worker_threads: 4
  max_workers: 10

# ============================================================
# GÜVENLİK AYARLARI
# ============================================================
security:
  # IP whitelisting (Dashboard için)
  ip_whitelist:
    enabled: false
    allowed_ips:
      - "127.0.0.1"
      - "192.168.1.0/24"

  # Rate limiting
  rate_limit:
    enabled: true
    requests_per_minute: 1000

  encryption_enabled: true # encrypt_keys ile aynı anlama gelebilir
  key_rotation_days: 90
  audit_enabled: true
  key_file: "data/security/.master_key"
  audit_log: "data/logs/security_audit.log"
  max_decryption_per_minute: 100
# ============================================================
# FILE WATCHER AYARLARI
# ============================================================
file_watcher:
  enabled: true
  debounce_ms: 500 # debounce_seconds yerine
  check_interval: 1 # Her 1 saniyede kontrol et (watchdog yoksa)

# ============================================================
# GÜVENLİ KAPANMA AYARLARI
# ============================================================
shutdown:
  timeout: 30 # Maksimum bekleme süresi (saniye)
  task_timeout: 30 # Task timeout süresi
  wait_for_tasks: true # Task bekle flag'i
  force_after_timeout: true # Timeout sonrası zorla kapat
  save_state: true # Durumu kaydet (state_persistence.state_dir kullanılır)
  close_positions: false # Açık pozisyonları kapat (false: sadece uyar)
  flush_buffers: true # Buffer'ları boşalt
  wait_for_pending_tasks: true # Bekleyen işleri tamamla

# ============================================================
# ERROR HANDLING & RETRY
# ============================================================
error_handling:
  retry:
    enabled: true
    max_attempts: 3
    exponential_backoff:
      enabled: true
      initial_delay: 1
      multiplier: 2.0
      max_delay: 30

  error_rate_limit: 10 # Dakika başına max hata sayısı
  critical_error_notify: true # Critical hatalarda bildirim gönder
  error_threshold_notify: 5 # Kaç hatadan sonra notify

